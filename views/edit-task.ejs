<%- include('./includes/scripts.ejs'); %>

<!DOCTYPE html>
<html>
	<head>
		<title>Minder - Edit task...</title>
		<script type="text/javascript" src="../views/scripts/edit_task.js"></script>
	</head>
	<script type="text/javascript">
		$(document).ready(function() {
			$("#date_picker").datepicker({
				minDate: 0,
				hour: 24,
				dateFormat: "yy-mm-dd"
			});
		});
	</script>
	<body onload="get_tasks('#task_viewer');">

		<%- include('./includes/menu.ejs'); %>

		<!-- main page container -->
		<div class="container">

			<!-- Used for storing the task ID -->
			<input type="hidden" task-id="<%= task.task_id %>" id="task_id">

			<!-- Page heading -->
			<h1>
				<span class="glyphicon glyphicon-edit pull-right" style="margin-right: 20px;"></span>
				Edit a task
			</h1>
			<hr />

			<!-- First content row -->
			<div class="row">

				<!-- Container for creating a new task -->
				<div class="col-md-8">
					<p class="sub-heading-container">
						<span class="sub-heading">Editing tasks "<%= task.task_name %>"</span>
						<button class="btn btn-danger pull_right" style="margin-left: 20px;" id="task_delete_button">Delete</button>
					</p><br />

					<!-- Form for creating a new task -->
					<form id="edit_task">
						<div class="form-group">
							<label>Name:</label>
							<input type="text" class="form-control" placeholder="Task name" name="task_name" value="<%= task.task_name %>">
						</div>
						<div class="form-group">
							<label>Description:</label>
							<textarea class="form-control task_desc_tb" rows="3" placeholder="Task description..." name="task_desc"><%= task.task_desc %></textarea>
						</div>
						<div class="form-group">
							<label>Due Date:</label>
							<input type="text" class="form-control" name="task_due_date" id="date_picker" size="20" value="<%= task.due_date %>">
						</div>
						<button type="submit" class="btn btn-primary" id="save_btn">
							Save changes
						</button>
						<span class="update_status" style="margin-left: 10px;"></span>
					</form>

				</div>

				<!-- Container for current classes -->
				<div class="col-md-4">
					<p class="sub-heading">
						Other tasks
					</p><br />

					<div class="panel panel-default class_viewer">
						<!-- Table for previewing the classes -->
						<table class="table table-striped" style="font-size: 1em;" id="task_viewer">
							<!-- Added via JS -->
						</table>
					</div>
				</div>

			</div>
			<%- include('./includes/footer.ejs'); %>
		</div>
	</body>
</html>
